import{getCountProjects}from"./sidebar.js";function startApp(){btnProject(),getProjects()}document.addEventListener("DOMContentLoaded",startApp);let projects=[],memoryProjects=[];const inputSearch=document.getElementById("search-input");function filteredProjectsBySearch(){const e=inputSearch.value.trim().toLowerCase();""!==e?projects=projects.filter(t=>t.name.toLowerCase().includes(e)):inputSearch!==e&&(projects=[...memoryProjects]),showProjects()}async function getProjects(){try{const e="http://localhost:3000/api/projects",t=await fetch(e),n=await t.json();projects=n.projects,memoryProjects=[...projects],showProjects()}catch(e){return void message("error","An unexpected error occurred while getting the project!","Reload the page or try again later")}}function btnProject(){document.getElementById("btn-add-project").addEventListener("click",()=>{modal()})}function modal(e=!1,t={}){Swal.fire({title:""+(e?"Edite name project":"Enter Project Details"),html:`\n            <div class="container-task">\n                <div class="container-task__item">\n                    <label for="project-title" class="swal2-label">Project Title:</label>\n                    <input type="text" id="project-title" placeholder="${e?"Edite project name here...":"Enter title here..."}" class="swal2-input" value="${t.name?t.name:""}">\n                </div>\n            </div>\n        `,showCancelButton:!0,showCloseButton:!0,confirmButtonText:""+(e?"Save changes":"Add project"),confirmButtonColor:"#697199",cancelButtonText:"Cancel",cancelButtonColor:"#DC3741",preConfirm:()=>{if(""===document.getElementById("project-title").value.trim())return Swal.showValidationMessage("Make sure all fields are complete."),!1}}).then(n=>{if(1==n.isConfirmed){const n=document.getElementById("project-title").value.trim();e?(t.name=n,updateProject(t)):createProject(n)}})}async function createProject(e){const t=new FormData;t.append("name",e);try{const n="http://localhost:3000/api/project/create",o=await fetch(n,{method:"POST",body:t}),c=await o.json();if("success"===c.type){message("success","Project Created Successfully","The project was created successfully!");const t={id:String(c.id),name:e,url:c.url,owner_id:c.owner_id,creation_date:c.creation_date};projects=[...projects,t],getCountProjects(),showProjects()}}catch(e){return void message("error","Project created Failed","An error occurred while creating the project, please try again later!")}}function showProjects(){if(clearHTML(),0===projects.length){const e=document.createElement("DIV");e.className="d-flex justify-content-center alert w-100";const t=document.createElement("DIV");return t.className="alert alert-danger fs-3 fw-semibold text-center w-auto",t.setAttribute="alert",t.textContent="It looks like you haven`t added any projects yet, start by adding a project!",e.appendChild(t),void document.getElementById("content-project").appendChild(e)}projects.forEach(e=>{const t=document.createElement("DIV");t.className="card-project rounded-4";const n=document.createElement("DIV");n.className="card-project__content p-4";const o=document.createElement("A");o.setAttribute("href","/dashboard/project?id="+e.url),o.className="card-project__header d-flex align-items-center justify-content-between";const c=document.createElement("H2");c.className="card-project__title fw-semibold",c.textContent=e.name;const r=document.createElement("P");r.className="card-project__icon mb-0",r.innerHTML='\n            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-chevron-right" viewBox="0 0 16 16">\n                <path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"/>\n            </svg>\n        ';const a=document.createElement("P");a.className="card-project__date fs-5",a.textContent="Created: "+e.creation_date;const s=document.createElement("DIV");s.className="mt-5 d-flex align-items-center justify-content-end";const i=document.createElement("DIV");i.className="d-flex align-items-center gap-3";const l=document.createElement("BUTTON");l.setAttribute("type","button"),l.className="card-project__btn-actions card-project__btn-actions--edite px-3 py-2 rounded-3",l.title="Edite project",l.innerHTML='\n            <span class="visually-hidden">Edite project</span>\n            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">\n                <path stroke-linecap="round" stroke-linejoin="round" d="M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125" />\n            </svg>\n        ',l.onclick=function(){modal(!0,{...e})};const d=document.createElement("BUTTON");d.setAttribute("type","button"),d.className="card-project__btn-actions card-project__btn-actions--delete px-3 py-2 rounded-3",d.title="Delete project",d.innerHTML='\n            <span class="visually-hidden">delete project</span>\n            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">\n                <path stroke-linecap="round" stroke-linejoin="round" d="M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0" />\n            </svg>\n        ',d.onclick=function(){confirmDelete(e)},t.appendChild(n),n.appendChild(o),o.appendChild(c),o.appendChild(r),n.appendChild(a),n.appendChild(s),s.appendChild(i),i.appendChild(l),i.appendChild(d),document.getElementById("content-project").appendChild(t)})}function confirmDelete(e){Swal.fire({icon:"question",title:"Are you sure you want to delete the project?",showCancelButton:!0,showCloseButton:!0,confirmButtonText:"Delete",cancelButtonText:"Cancel",confirmButtonColor:"#697199"}).then(t=>{t.isConfirmed&&deleteTask(e)})}async function deleteTask(e){const{id:t,projectTitle:n,url:o,ownerId:c,creationDate:r}=e,a=new FormData;a.append("id",t),a.append("name",n),a.append("url",o),a.append("owner_id",c),a.append("creation_date",r);try{const t="http://localhost:3000/api/project/delete",n=await fetch(t,{method:"POST",body:a});"success"===(await n.json()).type&&(message("success","Project Deleted Succesffully","The project was deleted successfully!"),projects=projects.filter(t=>t.id!==e.id),getCountProjects(),showProjects())}catch(e){return void message("error","Task Deleting Failed","An error occurred while deleting the project, please try again later!")}}async function updateProject(e){const{id:t,name:n,url:o,owner_id:c,creation_date:r}=e,a=new FormData;a.append("id",t),a.append("name",n),a.append("url",o),a.append("owner_id",c),a.append("creation_date",r);try{const e="http://localhost:3000/api/project/update",o=await fetch(e,{method:"POST",body:a});"success"===(await o.json()).type&&(message("success","Project updated Succesffully","The project was updated successfully!"),projects=projects.map(e=>(e.id===t&&(e.name=n),e)),showProjects())}catch(e){return void message("error","Task updating Failed","An error occurred while updating the project, please try again later!")}}function message(e,t,n){Swal.fire({position:"top-end",icon:e,title:t,text:n,showConfirmButton:!1,allowOutsideClick:!1,timer:2e3})}function clearHTML(){const e=document.getElementById("content-project");for(;e.firstChild;)e.removeChild(e.firstChild)}inputSearch.addEventListener("input",filteredProjectsBySearch);
//# sourceMappingURL=projects.js.map
